import{n,s as t}from"./index-e4a66fe5.js";const e=[];function s(s,o=n){let f;const i=new Set;function c(n){if(t(s,n)&&(s=n,f)){const n=!e.length;for(const n of i)n[1](),e.push(n,s);if(n){for(let n=0;n<e.length;n+=2)e[n][0](e[n+1]);e.length=0}}}return{set:c,update:function(n){c(n(s))},subscribe:function(t,e=n){const r=[t,e];return i.add(r),1===i.size&&(f=o(c)||n),t(s),()=>{i.delete(r),0===i.size&&(f(),f=null)}}}}export{s as w};
